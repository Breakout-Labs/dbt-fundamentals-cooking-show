version: 2

models:
  - name: orders
    description: >
      Enhanced order fact table with delivery timing metrics. Includes calculated fields for delivery time from both order placement and pickup.
    columns:
      - name: order_id
        description: Unique identifier for the order. Primary key.
        data_tests:
          - unique
          - not_null

      - name: customer_id
        description: Foreign key to the customer who placed the order
        data_tests:
          - not_null

      - name: ordered_at
        description: Timestamp when the order was placed in UTC
        data_tests:
          - not_null

      - name: order_status
        description: Current status of the order
        data_tests:
          - not_null
          - accepted_values:
              config:
                severity: warn
              arguments:
                values: ['pending', 'processing', 'completed', 'cancelled']

      - name: total_amount
        description: Total order amount in dollars
        data_tests:
          - not_null

      - name: delivery_time_from_order
        description: Time in minutes from order placement to delivery. Null if not yet delivered.

      - name: delivery_time_from_collection
        description: Time in minutes from pickup to delivery. Null if not yet delivered.